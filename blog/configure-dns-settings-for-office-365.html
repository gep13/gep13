
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - Configure DNS Settings for Office 365</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - Configure DNS Settings for Office 365" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/configure-dns-settings-for-office-365" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Configure DNS Settings for Office 365</h1>
    <div class="meta">        
Published on 15 May 2011<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/dns" class="btn btn-default btn-xs">dns</a>
                    <a role="button" href="/tags/lync" class="btn btn-default btn-xs">lync</a>
                    <a role="button" href="/tags/office-365" class="btn btn-default btn-xs">office 365</a>
                    <a role="button" href="/tags/sharepoint" class="btn btn-default btn-xs">sharepoint</a>
                    <a role="button" href="/tags/srv" class="btn btn-default btn-xs">srv</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>For the last few weeks I have been trying to sort of my installation of the <a href="http://www.microsoft.com/en-us/office365/online-software.aspx">Office 365 Beta</a>. I am not a business, but the Beta is open to individuals as well as corporate people. There are several reasons that I wanted to play with it:</p>
<ul>
<li>Sheer curiosity. I heard a lot about it while I was at the <a href="http://www.sharepointbestpractices.co.uk/">BPCUK conference</a></li>
<li>Wanted to try out the full integration experience with Windows Phone 7</li>
<li>Try out some sandboxed SharePoint solutions</li>
<li>Set up a meeting place for the administrators of the <a href="http://www.aberdeendevelopers.co.uk/">Aberdeen Developers .Net User Group</a></li>
</ul>
<p>When you get your invite to the Beta you will be asked to hand over a domain to Office 365 to take over the administration of. The majority of the time, that shouldn’t really be a problem as the domain that you are likely to want to host on Office 365 will be a dedicated one for that purpose, however, if like me you use the domain for other stuff, or you administer your own DNS settings, you won’t want to hand over the domain to their control.</p>
<p>Although not mentioned when you first log into the Office 365 setup page, you are able to configure the DNS settings yourself, the end result is that the domain entries simply point to Office 365, rather than being under their direct control.</p>
<p>Now, before we go too much further, let me state that I actually know very little about setting up DNS entries, and it was only through the help of <a href="http://twitter.com/#!/ianmoran">&#64;ianmoran</a> that I was actually able to get mine working.</p>
<p><em>NOTE: Ian has a post <em><a href="http://www.konnexion.com/?p=177"><em>here</em></a></em> that I used as an aid to get up and running</em></p>
<p><em><strong>Required DNS Records</strong></em></p>
<p>In order to know the DNS settings that you need to configure you have to log into the administration section of Office 365. Once in there, click on Admin. From there, click on Domains in the left hand menu, then click on the domain that you want to administer. Once there, click on DNS Manager, and you will see something like the following:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2011/5/15/image4.png" class="img-fluid" alt="DNS Manager" /></p>
<p>These are all the records that you will need to configure on your domain. The first set are used for the Exchange Email and the second set are used of setting up <a href="http://blogs.msdn.com/b/mssmallbiz/archive/2010/11/16/microsoft-lync-2010-information-and-resources-for-you.aspx">Lync 2010</a>.</p>
<p>If like me, you will be able to set up the majority of these records without too much trouble. It is just a case of logging into your hosting provider and adding the records. I did this without any problems through <a href="http://www.blacknight.com/">Blacknight’s</a> control panel for the MX, CNAME and TXT records.</p>
<p>However, when it came to the SRV records, I was stumped. I had never heard of <a href="http://en.wikipedia.org/wiki/SRV_record">SRV</a> (Service Record) before, and through the Blacknight control panel it appeared that I was only able to create the _tcp protocol record, there was no option to create a _tls protocol record. A quick email to the support team confirmed this, but I was told that they would be able to create the record on my behalf, phew!</p>
<p>With all the records created, I set about testing it. The Exchange email started working straight away, both through Outlook on the desktop, Webmail on the Internet, and through Outlook on my Windows Phone 7. Success!!</p>
<p>However, when it came to Lync 2010, I just couldn’t get it to work!</p>
<p><strong><em>Manual Lync 2010 Configuration</em></strong></p>
<p>With the help of Ian, I was able to set up Lync 2010 manually, to prove that it worked at all. This was done by going into Lync and selecting Tools | Options, and from there click “Advanced...”</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2011/5/15/image5.png" class="img-fluid" alt="Lync Options" /></p>
<p>Then, in the Advanced Connection Settings dialogue, manually configure the internal and external server names to be sipdir.online.lync.com:443:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2011/5/15/image6.png" class="img-fluid" alt="Advanced Connection Settings" /></p>
<p>And this will allow you to log into Lync using your user that you set up in Office 365.</p>
<p><strong><em>Testing SRV Records</em></strong></p>
<p>Although manually settings the records was “fine” I wanted to figure out what was wrong with my set up. In order to do that, I had to figure out what the records were set up as. The feedback that I was getting from Blacknight was that everything was fine on their end, but I had no way of verifying that. I had a report that they were using <a href="http://linux.die.net/man/1/dig">dig</a> to confirm the records, however, I don’t have a linux server to use that command, and even though I installed the Windows version of <a href="http://members.shaw.ca/nicholas.fong/dig/">dig</a>, I just couldn’t get it to work.</p>
<p>I fell back on trying to use nslookup to get the information that I needed, and I was finally able to figure out how to do this.</p>
<ol>
<li>Start | run</li>
<li>Type cmd then press enter</li>
<li>Type nslookup and then press enter</li>
<li>Type set type=srv and then press enter</li>
<li>Type _sip._tls.<your domain name here> and press enter</li>
<li>You will then get the record back</li>
<li>Type _sipfederationtls._tcp.<your domain name here> and press enter</li>
<li>You will then get your record back</li>
</ol>
<p>The output should look something like this:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2011/5/15/SRV-Records.png" class="img-fluid" alt="SRV Records" /></p>
<p><em>NOTE: There records are the ones that are misconfigured</em></p>
<p>Now, when I looked at this, I thought everything looked ok, when compared to the above screen shot for the DNS Manager settings within Office 365. However, when I showed this to Ian, who must have a keener eye than me, he told me that the _tls entry was incorrect. Notice how the svr hostname is appended with .aberdeendevelopers.co.uk? That is incorrect. Turns out that the SRV record which had been entered by Blacknight was missing a trailing period, which meant that the domain name was getting appended. I didn’t realise setting up DNS entries was this complicated!!</p>
<p>Another quick email to Blacknight support cleared up this problem, and I was then able to connect to Lync 2010, win!</p>


<div id="disqus_thread"></div>
<script type="text/javascript" src="/assets/js/disqus.js"></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2021 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript" src="/assets/js/google.js"></script>
<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/anchor.js"></script>

                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

