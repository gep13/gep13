
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - Chocolatey Package Error - Checksums do not match</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - Chocolatey Package Error - Checksums do not match" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/chocolatey-error-hashes-do-not-match" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Chocolatey Package Error - Checksums do not match</h1>
    <div class="meta">        
Published on 29 October 2018<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/checksums" class="btn btn-default btn-xs">checksums</a>
                    <a role="button" href="/tags/chocolatey" class="btn btn-default btn-xs">chocolatey</a>
                    <a role="button" href="/tags/error" class="btn btn-default btn-xs">error</a>
                    <a role="button" href="/tags/install" class="btn btn-default btn-xs">install</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>Earlier today on Twitter, I was asked this question:</p>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/gep13?ref_src=twsrc%5Etfw">&#64;gep13</a> I tried installing <a href="https://twitter.com/JuliaLanguage?ref_src=twsrc%5Etfw">&#64;JuliaLanguage</a> but I get this error: <a href="https://t.co/QEvqqayjSU">https://t.co/QEvqqayjSU</a><br>I would appreciate if you could help</p>&mdash; Foad Sojoodi Farimani (&#64;fsfarimani) <a href="https://twitter.com/fsfarimani/status/1056873572344356864?ref_src=twsrc%5Etfw">October 29, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>I started to write a response, but I realised that it was going to take more than 240 characters to explain, so I thought I would write a blog post about it instead.</p>
<h1 id="the-error">The Error</h1>
<p>The error that is being reported by Chocolatey is this:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2018/10/29/checksums-do-not-match.png" class="img-fluid" alt="Checksums do not match" /></p>
<p>I verified that I was getting the same error message by testing the installation on the local Chocolatey Testing Environment.</p>
<h1 id="what-does-this-mean">What does this mean?</h1>
<p>That's great, but what does that actually mean?  Let's break this log down a little bit...</p>
<blockquote class="blockquote">
<p>Progress: 100% - Completed download of C:\Users\Administrator\AppData\Local\Temp\chocolatey\Julia\1.0.0\julia-1.0.0-win64.exe
(52.83 MB).</p>
</blockquote>
<p>This tells us that Chocolatey successfully went into the chocolateyInstall.ps1 file and found the download URL that the package maintainer put in there.  Notice that it has downloaded the 64-bit version of this installer, since I ran it on a 64-bit operating system.</p>
<blockquote class="blockquote">
<p>Download of julia-1.0.0-win64.exe (52.83 MB) completed.</p>
</blockquote>
<p>This tells us that Chocolatey was successfully able to download a file from the specified URL.</p>
<blockquote class="blockquote">
<p>Error - hashes do not match. Actual value was '001874185A26F598ABE2E7FC287CACF66387C68CAA3251F5AA6EF97FB22020DD'.</p>
</blockquote>
<p>This is where things start to go wrong.  When the download of a file has been completed, Chocolatey will take a checksum (i.e. a hash) of the file.  This can then be compared to the checksum (if provided) by the package maintainer.  In this case, the package maintainer expected the checksum of the file to be <code>3bf5572cbcbc7848b235dcf21caf24ce26b9fb3839eb13db1a7170d20cdf834d</code> but it was actually <code>001874185A26F598ABE2E7FC287CACF66387C68CAA3251F5AA6EF97FB22020DD</code>.  Since Chocolatey is secure by default, the installation of the package immediately exits, and an error is thrown:</p>
<blockquote class="blockquote">
<p>ERROR: Checksum for 'C:\Users\Administrator\AppData\Local\Temp\chocolatey\Julia\1.0.0\julia-1.0.0-win64.exe' did not meet '3b
f5572cbcbc7848b235dcf21caf24ce26b9fb3839eb13db1a7170d20cdf834d' for checksum type 'sha256'.</p>
</blockquote>
<h1 id="why-do-we-need-checksums">Why do we need checksums?</h1>
<p>Chocolatey introduced the concept of checksums for package installation to provide some assurance to the end users of Chocolatey that the application installers that are being downloaded are correct/valid.  At the time of creating a package, we ask package maintainers to include the checksum for the files that are being downloaded, so that at installation time, this checksum can be asserted to ensure that what is being installed is what is expected.  This protects the user from any malicious tampering of the application installer.  When creating the package, the maintainer can sometimes find the published checksum of the files on the vendor website, or they can calculate the checksum of the file(s) themselves once they have tested to make sure that it is installed correctly.</p>
<h1 id="so-why-did-this-go-wrong">So why did this go wrong?</h1>
<p>Now, all of this makes perfect sense, and will work flawlessly, until one of two common things happen.</p>
<p>Firstly, some packages (like Google Chrome) don't included versioned URL's for their application installer.  As a result, you can only ever download the Chrome installer from one location, namely <code>https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise64.msi</code>.  As a result, whenever Google push out a new version of Chrome, which happens quite frequently, the most recent package version of Chrome on Chocolatey.org is immediately broken.  This is due to the fact that the checksum within the Chocolatey package is still the checksum for the old installer available at that URL, which has now been replaced with the new one.  In the case of the Google Chrome package, it is part of the <a href="https://github.com/chocolatey/chocolatey-coreteampackages">Core Team Packages</a> which checks for new package versions every 6 hours, and automatically pushes out a new package when detected.  As a result of this, the Google Chrome package is normally only &quot;broken&quot; for a short period of time.</p>
<p>The second way that checksums will break is if vendor &quot;change&quot; the application installer once it has been published, without changing the version number.  Unfortunately, this happens more often than you would think.  Let's walk this through...</p>
<ul>
<li>A vendor creates a new version of their application, let's call it 1.0.0, and publishes it to their website.</li>
<li>A Chocolatey Package maintainer spots that there is a new version pf the application, and sets about creating the Chocolatey package.  They download the installer, test that it is all working, and then calculate the checksum, update their packaging scripts, run <code>choco pack</code> and push the package version to Chocolatey.org</li>
<li>The automated checks on Chocolatey.org then kick in to make sure that the package does indeed download and install correctly, including verifying that the hashes match.</li>
<li>The package is then moved to human moderation, and the package is ultimately approved.</li>
<li>Some time later, the vendor then notices that there is a problem with the installer, and rather than increment the version number, they simply re-build the installer, and replace it on their website.</li>
<li>To anyone installing the application directly from the website, there are no problems.  However, to anyone installing the Chocolatey package, there will be error, as the checksum on the file which is downloaded, compared to the checksum in the Chocolatey package, will no longer match.</li>
</ul>
<p>Since we know that the package in question completed the automated installation test, we know that at one point the checksum on the installer did match what is in the package, however, this installer no longer has this checksum.</p>
<h1 id="what-can-i-do-about-it">What can I do about it?</h1>
<p>The best way to fix this problem would be to reach out to the maintainers of the package and ask them to push a new package version that includes the correct checksum.  In the case of this package, there is actually a new version of the application available, so this package is due to be updated.  If there wasn't a new version available, then the maintainer could push a new package version using what is known as the <a href="https://chocolatey.org/docs/create-packages#package-fix-version-notation">package fix notation</a>.</p>
<p>If this isn't an option, or you need the installation &quot;right&quot; now, you have two options, both of which are mentioned in the error message above.  The first would be to run this command:</p>
<pre><code class="language-powershell">choco install julia --checksum64 001874185A26F598ABE2E7FC287CACF66387C68CAA3251F5AA6EF97FB22020DD
</code></pre>
<p>The checksum in question is actually reported from Chocolatey, so what you need to ascertain is whether you trust that checksum.  To be safe, you would probably want to go to the vendor download page and verify this yourself.</p>
<p>The final option would be to run the command:</p>
<pre><code class="language-powershell">choco install julia --ignore-checksums
</code></pre>
<p>This is by far the least secure method, and it isn't one that I recommend.</p>
<h1 id="summary">Summary</h1>
<p>Due to the fact that Chocolatey is secure by default, there are situations like this that do occur.  However, please bear in mind that Chocolatey is trying to protect you from what could be a malicious installer.</p>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname
    var disqus_identifier = 'http://www.gep13.co.uk/blog/chocolatey-error-hashes-do-not-match' + 'S/';
    var disqus_title = 'Chocolatey Package Error - Checksums do not match';
    var disqus_url = 'http://www.gep13.co.uk/blog/chocolatey-error-hashes-do-not-match' + '/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2019 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());

    // Google Analytics
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-20926037-1', 'auto');
    ga('send', 'pageview');
</script>

<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript">
    anchors.options.placement = 'left';
    anchors.add();

    var snippets = document.querySelectorAll("pre > code");
    [].forEach.call(snippets, function(snippet) {
        snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
    });
    var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
    clipboardSnippets.on('success', function(e) {
        e.clearSelection();
        showTooltip(e.trigger, "Copied!");
    });
    clipboardSnippets.on('error', function(e) {
        showTooltip(e.trigger, fallbackMessage(e.action));
    });
</script>
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

