
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - How to rebase a PR branch</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - How to rebase a PR branch" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/how-to-rebase-a-pr-branch" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>How to rebase a PR branch</h1>
    <div class="meta">        
Published on 29 January 2017<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/branch" class="btn btn-default btn-xs">branch</a>
                    <a role="button" href="/tags/github" class="btn btn-default btn-xs">github</a>
                    <a role="button" href="/tags/how-to" class="btn btn-default btn-xs">how to</a>
                    <a role="button" href="/tags/pr" class="btn btn-default btn-xs">pr</a>
                    <a role="button" href="/tags/rebase" class="btn btn-default btn-xs">rebase</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="why-on-earth-would-you-do-this">Why on earth would you do this?!?</h1>
<p>Back in September 2016, GitHub announced a very interesting feature, namely, the ability for a maintainer of a repository to push changes back to a remote repository (i.e. fork) from where a PR had been submitted.</p>
<p>You can find out more information about this <a href="https://github.com/blog/2247-improving-collaboration-with-forks">here</a>.</p>
<p>This is particularly interesting for two reasons.</p>
<p>Firstly, during a PR review, the code that is being submitted might be almost exactly correct, and ready for inclusion in the repository, and there is only one tiny thing not quite right.  You, as the maintainer, could spend some time explaining what is required, or, with this new feature you can simply make the change yourself, push it back to the source branch, and then accept the PR.  Using this approach has a number of benefits.</p>
<ul>
<li>All the changes associated with the PR are contained within the PR for later review</li>
<li>Any Continuous Integration checks performed on the PR can be run again with these changes in place</li>
<li>It is sometimes quicker to simply make the change, rather than trying to explain it</li>
</ul>
<p>Secondly, the very nature of Open Source contributions means that there might be some time between when the PR was submitted, and when it is reviewed and ultimately merged.  On the projects that I work on, when this happens, there is a preference to have the changes in the PR branch rebased with the upstream branch, therefore bringing it up to date.  However, asking a contributor to an open source project to rebase a branch can sometimes be quite daunting.  I remember the first time that I was <a href="https://github.com/chocolatey/chocolatey/pull/238">asked to do this</a> on a PR into the Chocolatey Repository, and I literally had NO clue what I was doing.  Thankfully I had a lot of guidance from <a href="https://github.com/rismoney">rismoney</a> to help with this.  But again, rebasing can be quite daunting.  Being able to do this on behalf of the contributor opens up the potentially for a much quicker turn around on merging a PR.</p>
<p><strong>NOTE:</strong> Performing a rebase on someone else's fork is really only something that should be done if you intend to merge the PR straight away, once any CI builds have passed.  Doing anything else would leave their branch in a state that differs from their local copy of the truth, and quite simply, it would be bad form to leave it in this state, so don't do it!</p>
<h1 id="the-contributor-has-to-allow-the-branch-to-be-updated">The contributor has to allow the branch to be updated</h1>
<p>As mentioned in the linked article, allow a PR branch to be updated is something that the contributor can choose not to allow, but it is enabled by default:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/29/allow-edit-from-maintainers.png" class="img-fluid" alt="Allow Edits from Maintainers" /></p>
<p>I would encourage any contributor to leave this checkbox ticked when submitting a PR, as it does open up much more flexibility on the part of the maintainers of the project.</p>
<h1 id="lets-see-this-in-action">Let's see this in action</h1>
<p>As an example of where this can be used, let's use this <a href="https://github.com/cake-build/cake/pull/1360">PR</a>.  Having reviewed the changes in this PR, I can say that it is good to go, however, this is the current state:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/29/this-branch-is-out-of-date-with-the-base-branch.png" class="img-fluid" alt="This branch is out of date with the base branch" /></p>
<p>All the CI builds associated with the PR have passed, but it is now out of date with the base branch, meaning that it needs to be rebased.</p>
<p>If you look closely at the above screen shot, you will see the following text:</p>
<blockquote class="blockquote">
<p>Add more commits by pushing to the wixheat-pog-fix branch on jnm2/cake</p>
</blockquote>
<p>This tells the maintainer of the project that when this PR was created, the box was checked to allow changes from the maintainer.  So, let's go ahead and rebase the PR branch with the latest from upstream, and push the changes back.  Then, once all the CI builds pass, we can get the PR merged in.</p>
<p>These are the steps that I follow:</p>
<pre><code>mkdir jnm2
cd jnm2
git clone https://github.com/jnm2/cake.git
cd cake
git checkout wixheat-pog-fix
git remote add upstream https://github.com/cake-build/cake.git
git fetch upstream develop
git rebase upstream/develop
git push -f
</code></pre>
<p>Doing this last step causes the following to happen:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/29/git-push-force.png" class="img-fluid" alt="git push force" /></p>
<p>i.e. all the CI builds for this PR are triggered again, but this time, the branch is up to date with the base branch.</p>
<p>Now, all you have to do is wait for these builds to finish, and assuming everything went well, you will see the following:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/29/all-ready-to-be-merged.png" class="img-fluid" alt="All ready to be merged" /></p>
<p>At which point, you can merge the PR.  Job done!</p>
<p>Well, almost...</p>
<p>One of the most important things in Open Source is to be kind and courteous.  Someone has went out of their way to make a contribution into your project, so make sure that you say thank you!</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/29/say-thank-you.png" class="img-fluid" alt="Say thank you" /></p>
<h1 id="thanks-to-mattias">Thanks to Mattias</h1>
<p>Huge thanks have to go to Mattias (a.k.a <a href="https://twitter.com/devlead">devlead</a>) for showing me that this was possible.</p>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname
    var disqus_identifier = 'http://www.gep13.co.uk/blog/how-to-rebase-a-pr-branch' + 'S/';
    var disqus_title = 'How to rebase a PR branch';
    var disqus_url = 'http://www.gep13.co.uk/blog/how-to-rebase-a-pr-branch' + '/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2017 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());

    // Google Analytics
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-20926037-1', 'auto');
    ga('send', 'pageview');
</script>

<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript">
    anchors.options.placement = 'left';
    anchors.add();

    var snippets = document.querySelectorAll("pre > code");
    [].forEach.call(snippets, function(snippet) {
        snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
    });
    var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
    clipboardSnippets.on('success', function(e) {
        e.clearSelection();
        showTooltip(e.trigger, "Copied!");
    });
    clipboardSnippets.on('error', function(e) {
        showTooltip(e.trigger, fallbackMessage(e.action));
    });
</script>
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

