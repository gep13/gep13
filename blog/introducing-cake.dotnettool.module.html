
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - Introducing the Cake.DotNetTool.Module</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - Introducing the Cake.DotNetTool.Module" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/introducing-cake.dotnettool.module" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Introducing the Cake.DotNetTool.Module</h1>
    <div class="meta">        
Published on 12 October 2018<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/automation" class="btn btn-default btn-xs">automation</a>
                    <a role="button" href="/tags/build" class="btn btn-default btn-xs">build</a>
                    <a role="button" href="/tags/cake" class="btn btn-default btn-xs">cake</a>
                    <a role="button" href="/tags/cake-contrib" class="btn btn-default btn-xs">cake-contrib</a>
                    <a role="button" href="/tags/dotnet" class="btn btn-default btn-xs">dotNet</a>
                    <a role="button" href="/tags/modules" class="btn btn-default btn-xs">modules</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="what-is-it">What is it?</h1>
<p>Back in version <a href="https://github.com/cake-build/cake/releases/tag/v0.13.0">0.13.0</a> of Cake a feature known as <a href="https://github.com/cake-build/cake/issues/646">Module Support</a> was released.  This provided the ability to both extend and replace some of the built in functionality of Cake.</p>
<p>One of these extension points is the registration of <a href="http://cakebuild.net/api/Cake.Core.Packaging/IPackageInstaller/">IPackageInstaller</a>'s, which deal with installing tools and addins during the Cake Script execution.  The DotNet Tool Module utilizes this extension point to allow tools to be resolved using the <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-tool-install">DotNet CLI</a>, specifically, the <code>dotnet tool</code> command.</p>
<p><strong>NOTE:</strong> The <code>dotnet tool</code> command deals with the installation of tools.  As a result, it only makes sense for this module to deal with tools, and not addins.</p>
<h1 id="why-is-this-needed">Why is this needed?</h1>
<p>Out of the box, Cake has the ability to install tools and addins from any NuGet source.  This is documented on the <a href="http://cakebuild.net/docs/fundamentals/preprocessor-directives">Cake Website</a>.  Recently, <a href="https://github.com/larzw">Larz White</a> <a href="http://cakebuild.net/blog/2017/01/cake-paket">showed</a> how it was possible to use an alternative package manager, namely <a href="https://fsprojects.github.io/Paket/">Paket</a> to install those tools and addins.</p>
<p>However, there are a growing number of tools that can be installed as Global DotNet Tools (there is a list of these compiled <a href="https://github.com/natemcmaster/dotnet-tools">here</a> by Nate McMaster).  Cake itself, is actually published as a DotNet Global Tool.  As part of your build process, you might want to have these tools installed, ready to be used.  However, what I want to be able to do is to define the installation of these tools in the same way as I do my other tools and addins, so that everything is in the same place.  For example, I want to put them right here:</p>
<pre><code>///////////////////////////////////////////////////////////////////////////////
// TOOLS
///////////////////////////////////////////////////////////////////////////////

#tool nuget:?package=coveralls.io&amp;version=1.3.4
#tool nuget:?package=gitreleasemanager&amp;version=0.5.0
#tool nuget:?package=GitVersion.CommandLine&amp;version=3.6.2
#tool nuget:?package=JetBrains.ReSharper.CommandLineTools&amp;version=2016.3.20161223.160402
#tool nuget:?package=ReSharperReports&amp;version=0.2.0
#tool nuget:?package=KuduSync.NET&amp;version=1.3.1
#tool nuget:?package=Wyam&amp;version=0.16.1
#tool nuget:?package=gitlink&amp;version=2.4.1
#tool nuget:?package=MSBuild.Extension.Pack&amp;version=1.9.0
</code></pre>
<p>Along with all the other tools that I use in my build.</p>
<p>And that is what this Cake Module allows you to do.  You can now add the following:</p>
<pre><code>#tool dotnet:?package=Octopus.DotNet.Cli&amp;version=4.41.0
</code></pre>
<p>Which would install version 4.41.0 of the <a href="https://www.nuget.org/packages/Octopus.DotNet.Cli/4.41.0">Octopus.DotNet.Cli package</a>.</p>
<p><strong>NOTE:</strong> What is different here is that <code>dotnet</code> is being used, rather than <code>nuget</code>.  This is what causes Cake to defer to the DotNet Tool Module, rather than using NuGet to resolve the tool installation.</p>
<h1 id="installation">Installation</h1>
<p>Due to the fact that Cake Modules are extending and altering the internals of the Cake, the Module Assembly needs to be loaded prior to the main Cake execution.  As documented in the <a href="https://cakebuild.net/docs/fundamentals/preprocessor-directives">Module section of this page</a>, you simply have to do the following:</p>
<pre><code>./build.sh --bootstrap
./build.sh
</code></pre>
<p>This means that the first execution of Cake will inspect your Cake script for any module inclusions in your script, and if there are any, download and install them.  And the second execution will then be able to use those modules, and complete the usage of the module.</p>
<p>An example of a Cake script which both includes the module definition for the DotNet Tool Module, and which also uses it, is shown below:</p>
<pre><code>#module nuget:?package=Cake.DotNetTool.Module&amp;version=0.1.0
#tool &quot;dotnet:?package=Octopus.DotNet.Cli&amp;version=4.41.0&quot;
</code></pre>
<h1 id="usage">Usage</h1>
<p>As mentioned above, installing a tool using the DotNet Tool Module is as simple as:</p>
<pre><code>#tool dotnet:?package=Octopus.DotNet.Cli&amp;version=4.41.0
</code></pre>
<p>If the tool in question comes from a different source, you can change that as follows:</p>
<pre><code>#tool dotnet:https://www.myget.org/F/gep13/api/v2?package=Octopus.DotNet.Cli&amp;version=4.41.0
</code></pre>
<p>By default, the DotNet Tool Module will install a tool to the location of the defined Cake Tools folder (this is normally simply a <code>tools</code> folder located beside the Cake Script that is being executed).  It is possible to control the location of this tools folder in the <a href="https://cakebuild.net/docs/fundamentals/default-configuration-values">normal way</a>, and additionally, you can opt to install the DotNet Tool globally using:</p>
<pre><code>#tool dotnet:?package=Octopus.DotNet.Cli&amp;version=4.41.0&amp;global
</code></pre>
<p>Additional parameters that can be passed to the pre-processor directive include:</p>
<ul>
<li>configfile
<ul>
<li>Specifies which NuGet config file should be used during the execution</li>
</ul>
</li>
<li>framework
<ul>
<li>Specifies the <a href="https://docs.microsoft.com/en-us/dotnet/standard/frameworks">target framework</a> to install the tool for. By default, the .NET Core SDK tries to choose the most appropriate target framework.</li>
</ul>
</li>
</ul>
<p>Finally, you can control the logging verbosity of the underlying <code>dotnet tool</code> command by altering the overall verbosity of the Cake Script execution.  i.e. running:</p>
<pre><code>./build.sh --verbosity=diagnostic
</code></pre>
<p>will cause the <code>dotnet tool</code> command to be ran with diagnostic verbosity as well.</p>
<p>The parameters that can be used in this pre-processor directive come from the documentation which is available <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-tool-install">here</a>.</p>
<h1 id="documentation">Documentation</h1>
<p>You can find additional documentation for this module here:</p>
<p><a href="https://cake-contrib.github.io/Cake.DotNetTool.Module/">https://cake-contrib.github.io/Cake.DotNetTool.Module/</a></p>
<h1 id="source-code">Source Code</h1>
<p>The source code for this Module can be found here:</p>
<p><a href="https://github.com/cake-contrib/Cake.DotNetTool.Module">https://github.com/cake-contrib/Cake.DotNetTool.Module</a></p>
<h2 id="chat-room">Chat Room</h2>
<p>If you have any questions about this Module, then please feel to drop into the Gitter Chat room for all the addins and modules which exist in the <a href="https://github.com/cake-contrib">cake-contrib organisation</a> on GitHub:</p>
<p><a href="https://gitter.im/cake-contrib/Lobby?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/cake-contrib/Lobby.svg" class="img-fluid" alt="Join the chat at https://gitter.im/cake-contrib/Lobby" /></a></p>
<h2 id="other-cake-modules">Other Cake Modules</h2>
<p>There are a number of other Cake Modules that perform similar functionality for other Package Managers, for example:</p>
<ul>
<li><a href="https://www.nuget.org/packages/Cake.Paket.Module/">Cake.Paket.Module</a></li>
<li><a href="https://www.nuget.org/packages/Cake.Chocolatey.Module/">Cake.Chocolatey.Module</a></li>
<li><a href="https://www.nuget.org/packages/Cake.DNF.Module/">Cake.DNF.Module</a></li>
<li><a href="https://www.nuget.org/packages/Cake.APT.Module/">Cake.APT.Module</a></li>
<li><a href="https://www.nuget.org/packages/Cake.Npm.Module/0.1.0-unstable0014">Cake.Npm.Module</a></li>
</ul>


<div id="disqus_thread"></div>
<script type="text/javascript" src="/assets/js/disqus.js"></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2023 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-41MC4W3E22"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-41MC4W3E22');
</script>
<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/anchor.js"></script>

                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

