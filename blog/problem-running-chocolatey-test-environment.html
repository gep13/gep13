
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - Problem Running Chocolatey Test Environment</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - Problem Running Chocolatey Test Environment" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/problem-running-chocolatey-test-environment" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Problem Running Chocolatey Test Environment</h1>
    <div class="meta">        
Published on 27 July 2018<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/chocolatey" class="btn btn-default btn-xs">chocolatey</a>
                    <a role="button" href="/tags/test-environment" class="btn btn-default btn-xs">test environment</a>
                    <a role="button" href="/tags/vagrant" class="btn btn-default btn-xs">vagrant</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>During a <a href="https://gitter.im/chocolatey/choco?at=5b59cf471be9bb57bcc5a6e4">Gitter discussion</a> yesterday, an interesting
point of discussion came up, so I thought I would capture it here in a blog post.  The short version is that you
probably want to make sure that you are using the latest version of Vagrant when trying to use the Chocolatey Test
Environment, although bear in mind that this might not have been tested by anyone, and may have other problems :-).</p>
<h2 id="the-problem">The Problem</h2>
<p>When the Chocolatey Community member was trying to run the <a href="https://github.com/chocolatey/chocolatey-test-environment">Chocolatey Test Environment</a>
on his Windows 10 machine, they were running into the following error:</p>
<pre><code class="language-sh">Bringing machine 'default' up with 'virtualbox' provider...
 ==&gt; default: Box 'ferventcoder/win2012r2-x64-nocm' could not be found. Attempting to find and install...
    default: Box Provider: virtualbox
    default: Box Version: &gt;= 0
The box 'ferventcoder/win2012r2-x64-nocm' could not be found or
could not be accessed in the remote catalog. If this is a private
box on HashiCorp's Atlas, please verify you're logged in via
`vagrant login`. Also, please double-check the name. The expanded
URL and error message are shown below:

URL: [&quot;https://atlas.hashicorp.com/ferventcoder/win2012r2-x64-nocm&quot;]
Error: The requested URL returned error: 404 Not Found
</code></pre>
<p>Going to the URL shown in the output above, it did indeed result in a 404.  However, a quick
search of the Vagrant Cloud showed that the base box did in fact exist.  You can find it here:</p>
<p><a href="https://app.vagrantup.com/ferventcoder/boxes/win2012r2-x64-nocm">https://app.vagrantup.com/ferventcoder/boxes/win2012r2-x64-nocm</a></p>
<p>A further test on my own machine, resulted in the following output:</p>
<pre><code class="language-sh">Bringing machine 'default' up with 'virtualbox' provider...
==&gt; default: Box 'ferventcoder/win2012r2-x64-nocm' could not be found. Attempting to find and install...
default: Box Provider: virtualbox
default: Box Version: &gt;= 0
==&gt; default: Loading metadata for box 'ferventcoder/win2012r2-x64-nocm'
default: URL: https://vagrantcloud.com/ferventcoder/win2012r2-x64-nocm
==&gt; default: Adding box 'ferventcoder/win2012r2-x64-nocm' (v1.0.0) for provider: virtualbox
default: Downloading: https://vagrantcloud.com/ferventcoder/boxes/win2012r2-x64-nocm/versions/1.0.0/providers/virtualbox.box
default: Progress: 1% (Rate: 2764k/s, Estimated time remaining: 0:30:03)
</code></pre>
<p>Which correctly worked.</p>
<p><strong>NOTE:</strong> The difference in the download URL's.</p>
<p><a href="https://atlas.hashicorp.com/ferventcoder/win2012r2-x64-nocm">https://atlas.hashicorp.com/ferventcoder/win2012r2-x64-nocm</a></p>
<p>compared to:</p>
<p><a href="https://vagrantcloud.com/ferventcoder/win2012r2-x64-nocm">https://vagrantcloud.com/ferventcoder/win2012r2-x64-nocm</a></p>
<h2 id="the-solution">The Solution</h2>
<p>After a bit of digging, it turns out that the Chocolatey Community Member was following the
instructions in the README.md of the linked repository, which suggests using 1.8.1 of vagrant,
where as I was using version 2.0.1.  My guess was that there was &quot;something&quot; in the earlier
version of the vagrant client which no longer worked, i.e. a URL redirect was no longer in place.</p>
<p>Turns out that this &quot;guess&quot; was pretty much spot on.  Rob Reynolds was able to confirm this by
pointing out this Google Groups post:</p>
<p><a href="https://groups.google.com/forum/#!msg/vagrant-up/H8C68UTkosU/qz4YUmAgBAAJ">https://groups.google.com/forum/#!msg/vagrant-up/H8C68UTkosU/qz4YUmAgBAAJ</a></p>
<p>So bascially, if you are wanting to run an earlier version of the Vagrant client, you are going
to need to set the following environment variable:</p>
<pre><code class="language-sh"># macOS and Linux
export VAGRANT_SERVER_URL=&quot;https://vagrantcloud.com&quot;

# Windows (CMD)
set VAGRANT_SERVER_URL=&quot;https://vagrantcloud.com&quot;

# Windows (Powershell)
$env:VAGRANT_SERVER_URL=&quot;https://vagrantcloud.com&quot;
</code></pre>
<p>Or, upgrade to a newer version of Vagrant.</p>
<h2 id="the-outcome">The Outcome</h2>
<p>I am going to update the Chocolatey Test Environment repository to include some of this
information, so that other people don't also run into this problem.</p>


<div id="disqus_thread"></div>
<script type="text/javascript" src="/assets/js/disqus.js"></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2022 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript" src="/assets/js/google.js"></script>
<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/anchor.js"></script>

                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

