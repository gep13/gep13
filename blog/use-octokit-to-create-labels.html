
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - Use Octokit to create labels</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - Use Octokit to create labels" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/use-octokit-to-create-labels" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/blog">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Use Octokit to create labels</h1>
    <div class="meta">        
Published on 27 January 2017<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/github" class="btn btn-default btn-xs">github</a>
                    <a role="button" href="/tags/how-to" class="btn btn-default btn-xs">how to</a>
                    <a role="button" href="/tags/labels" class="btn btn-default btn-xs">labels</a>
                    <a role="button" href="/tags/octokit" class="btn btn-default btn-xs">octokit</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="why-would-you-need-to-do-this">Why would you need to do this?</h1>
<p>Good question!  I have a small amount compulsive behaviour when it comes to labels that are associated with GitHub projects that I work on.  Both in terms of the colour that is used, as well as the text that is associated with the label.  Being consistent means that it is much easier to identity what an issue/pull request is about, before even reading anything about it.</p>
<h1 id="so-what-is-the-problem">So what is the problem?</h1>
<p>By default, when you create a new repository on GitHub, this is what you get for labels:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/27/default-github-labels.png" class="img-fluid" alt="Default GitHub Labels" /></p>
<p>Now, while some of you might be saying there is nothing wrong with this, I much prefer them to look like this:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/27/my-github-labels.png" class="img-fluid" alt="My GitHub Labels" /></p>
<p>Ah, much better!</p>
<p>Now, while I could make these changes manually through the GitHub User Interface, this is time consuming, and prone to mistakes.  Having done this more than two times, it was time to automate it!</p>
<h1 id="enter-octokit">Enter Octokit</h1>
<p>Octokit is GitHub API Client, which means that you can do pretty much anything through it, that you can do through the GitHub User Interface, including the creation of labels.</p>
<p>After a small amount of hacking, this is what I came up with (<strong>NOTE:</strong> I wouldn't really consider this production ready code, but it does serve my purpose).</p>
<h2 id="run-the-program">Run the Program</h2>
<pre><code class="language-csharp">private static GitHubClient _githubClient;

static void Main(string[] args)
{
    _githubClient = CreateGitHubClient();

    GetLabels();
}
</code></pre>
<h2 id="create-the-github-client">Create the GitHub Client</h2>
<p><strong>NOTE:</strong> This part requires you to input either the password or access token that you use for GitHub.  The ProductHeaderValue can really be anything.</p>
<pre><code class="language-csharp">private static GitHubClient CreateGitHubClient()
{
    var credentials = new Credentials(&quot;gep13&quot;, &quot;&lt;your access token needs to go here&gt;&quot;);
    var github = new GitHubClient(new ProductHeaderValue(&quot;gep13&quot;)) { Credentials = credentials };
    return github;
}
</code></pre>
<h2 id="setup-default-labels">Setup Default Labels</h2>
<pre><code class="language-csharp">private static List&lt;NewLabel&gt; _defaultLabels = new List&lt;NewLabel&gt;();

private static void SetUpDefaultLabels()
{
    _defaultLabels.Add(new NewLabel(&quot;Breaking change&quot;, &quot;b60205&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Bug&quot;, &quot;ee0701&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Build&quot;, &quot;009800&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Documentation&quot;, &quot;d4c5f9&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Feature&quot;, &quot;84b6eb&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Improvement&quot;, &quot;207de5&quot;));
    _defaultLabels.Add(new NewLabel(&quot;Up-for-grabs&quot;, &quot;159818&quot;));
}
</code></pre>
<h2 id="create-and-delete-labels">Create and Delete Labels</h2>
<pre><code class="language-csharp">private static void CreateLabels()
{
    SetUpDefaultLabels();

    try
    {
        var labels = _githubClient.Issue.Labels.GetAllForRepository(&quot;cake-contrib&quot;, &quot;Cake.Ember&quot;).Result;

        foreach (var label in labels)
        {
            _githubClient.Issue.Labels.Delete(&quot;cake-contrib&quot;, &quot;Cake.Ember&quot;, label.Name).Wait();
        }

        foreach (var label in _defaultLabels)
        {
            _githubClient.Issue.Labels.Create(&quot;cake-contrib&quot;, &quot;Cake.Ember&quot;, label).Wait();
        }
    }
    catch (Exception)
    {
        Debug.Write(&quot;boom&quot;);
    }
}
</code></pre>
<h1 id="so-what-are-you-doing-here">So what are you doing here?</h1>
<p>Essentially what this boils down to is...</p>
<ul>
<li>Create a GitHub Client, which gives you access to the GitHub API</li>
<li>Configure the default labels that I want to create</li>
<li>Loop through and delete all the existing labels</li>
<li>Loop through and create the new default labels</li>
</ul>
<p>With this in place, the total execution takes around 3 seconds to complete, as opposed to minutes of clicking the mouse.</p>
<p>Much better!</p>


<div id="disqus_thread"></div>
<script type="text/javascript" src="/assets/js/disqus.js"></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright © 2019 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript" src="/assets/js/google.js"></script>
<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript" src="/assets/js/anchor.js"></script>

                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

