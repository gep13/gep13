
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Gary Ewan Park - How to skip AppVeyor builds</title>
        <meta name="description" content="Ramblings and Ponderings of a Microsoft Fan Boy..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Gary Ewan Park" href="/feed.rss" />
        <link type="application/atom+xml" rel="alternate" title="Gary Ewan Park" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Gary Ewan Park" />
        <meta name="msapplication-tooltip" content="Gary Ewan Park" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Gary Ewan Park - How to skip AppVeyor builds" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://www.gep13.co.uk/blog/how-to-skip-appveyor-builds" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Gary Ewan Park</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li>
<li><a href="/talks">Talks</a></li>
<li><a href="/posts">Archive</a></li>
<li><a href="/contact">Contact</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>How to skip AppVeyor builds</h1>
    <div class="meta">        
Published on 10 January 2017<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/appveyor" class="btn btn-default btn-xs">appveyor</a>
                    <a role="button" href="/tags/continuous-integration" class="btn btn-default btn-xs">continuous integration</a>
                    <a role="button" href="/tags/how-to" class="btn btn-default btn-xs">how to</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h1 id="why-skip-builds">Why skip builds?</h1>
<p>9 times out of 10, there is actually no need to skip a build that is triggered on AppVeyor, or any Continuous Integration server.  The whole point is that you <em>want</em> to trigger a build on every commit, so that you can see when things stopped working.  There are however those times when the change that you are making doesn't justify, or require a build.</p>
<p>For me, this is normally when I am making a small change, for example:</p>
<ul>
<li>correcting whitespace in a file</li>
<li>adding/correcting documentation</li>
<li>fixing a coding/style convention</li>
</ul>
<p>In these situations, running a build simply isn't needed, as it is highly unlikely that these changes will result in a failed build.</p>
<p>Now, purists out there will be saying that your Continuous Integration builds shouldn't take a long to run, therefore, you should simply run every build.  While I don't disagree that your Continuous Integration builds should be quick to run, I still think there is a need to control if/when a build executes.</p>
<h1 id="why-not-simply-stop-the-build">Why not simply stop the build?</h1>
<p>Some people out there might be asking why not simply stop the build if not required.  There is nothing wrong with that approach, but for me, it would break me out of the coding workflow.  I would need to jump to the Continuous Integration server in order to stop the build, taking me away from what I was doing.  This for me is a show stopper, so there has to be another way.</p>
<h1 id="appveyor-has-you-covered">AppVeyor has you covered!</h1>
<p>For the Open Source Projects that I work on, I use <a href="https://www.appveyor.com/">AppVeyor</a> as my default Continuous Integration system.  It is incredibly easy to setup and use, and it is completely free for Open Source projects.</p>
<p>Once you have configured AppVeyor to work with your source control repository, any time you create a commit into the repository, a build will be triggered on AppVeyor.</p>
<div class="alert alert-info"><p><strong>NOTE</strong></p>
<p>Depending on your AppVeyor configuration, this might not be exactly correct.  For example, you might have corrected AppVeyor to only trigger on certain branches.  However, for the purposes of this blog post, let's assume that the above it correct.</p>
</div>
<p>Out of the box, a series of commits into your repository:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-github-commits.png" class="img-fluid" alt="Series of commits into Source Control" /></p>
<p>results in the following builds being triggered on AppVeyor:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-builds.png" class="img-fluid" alt="Resulting Builds on AppVeyor" /></p>
<h2 id="skip-commits-using-direct-commits-messages">Skip commits using direct commits messages</h2>
<p>Let's imaginge the situation that I was away to make a commit into source control, if I add either <code>[skip ci]</code> or <code>[ci skip]</code> to the end of the commit message, then AppVeyor will ignore the commit, and <em>NOT</em> run a build.</p>
<p>To show this, have a look at this series of commits:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-github-commits-with-skip.png" class="img-fluid" alt="Series of commits into Source Control with skip commit message" /></p>
<p>and the resulting builds on AppVeyor:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-appveyor-builds-with-skip.png" class="img-fluid" alt="Resulting Builds on AppVeyor with skip commit" /></p>
<p>Notice that there was not a build for the commit message of <code>Fourth commit [skip ci]</code>.</p>
<h2 id="its-good-but-not-quite-good-enough">It's good, but not quite good enough</h2>
<p>The above strategy works really well, however, it does rely on the end user, i.e. me, remembering to add the nomenclature at the end of the commit message.  Unfortunately, this is not something that is likely to happen, and would therefore invalidate the premise of this blog post.</p>
<p>In order to help with this, AppVeyor also helps by allowing the configuration of a regular expression, which examines the commit message, and based on finding a match, will skip the build.</p>
<p>The is ideal for the way that I work.  I use commit messages like the following:</p>
<p><code>(GH-123) Added foo to bar</code></p>
<p>where the GitHub issue associated with the commit is housed within a set of parenthesis.</p>
<p>When I do a commit that is purely related to say documentation, then I use a commit message similar to the following:</p>
<p><code>(doc) Corrected typo in bar class</code></p>
<p>If I can configure a regular expression that can match on this convention, then I can use my existing workflow, whilst also skipping builds that are not required.</p>
<p>The AppVeyor configurtion that I use to make this happen is the following:</p>
<pre><code class="language-yaml">#---------------------------------#
#  Skip builds for doc changes    #
#---------------------------------#
skip_commits:
  # Regex for matching commit message
  message: /\(doc\).*/
</code></pre>
<p>So, if I have a commit into source control like the following:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-github-commits-with-doc.png" class="img-fluid" alt="Series of commits into Source Control with doc commit message" /></p>
<p>then AppVeyor simply skips the build:</p>
<p><img src="https://gep13wpstorage.blob.core.windows.net/gep13/2017/01/10/appveyor-builds-with-doc.png" class="img-fluid" alt="Resulting Builds on AppVeyor with doc commit message" /></p>
<h1 id="additional-options">Additional options</h1>
<p>The above configuration works perfectly for me, however, AppVeyor includes a number of other <a href="https://www.appveyor.com/docs/how-to/filtering-commits/">configuration options</a> to skip builds.  This includes:</p>
<ul>
<li>skipping and including commits based on author of commit</li>
<li>skipping and including commits based on file name</li>
</ul>
<p>I personally haven't had a need for this type of configuration, but I would encourage you to look at them, if they suit your particular workflow.</p>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname
    var disqus_identifier = 'http://www.gep13.co.uk/blog/how-to-skip-appveyor-builds' + 'S/';
    var disqus_title = 'How to skip AppVeyor builds';
    var disqus_url = 'http://www.gep13.co.uk/blog/how-to-skip-appveyor-builds' + '/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/gep13">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Copyright Â© 2017 by Gary Ewan Park. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/gep13/gep13.github.io"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="http://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gep13'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());

    // Google Analytics
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-20926037-1', 'auto');
    ga('send', 'pageview');
</script>

<script type="text/javascript" src="/assets/js/anchor.min.js" />
<script type="text/javascript" src="/assets/js/clipboard.min.js" />
<script type="text/javascript">
  anchors.add();
  new Clipboard('code');
</script>
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>
        </body>
</html>

