#---------------------------------#
#      general configuration      #
#---------------------------------#

# version format
version: 1.0.{build}

#---------------------------------#
#    environment configuration    #
#---------------------------------#

# scripts that are called at very beginning, before repo cloning
init:
  - git config --global user.email "gep13@gep13.co.uk"
  - git config --global user.name "Gary Ewan Park"

# clone directory
clone_folder: C:\projects\gep13-github-io

# environment variables
environment:
  GithubUsername: gep13
  GithubPassword:
    secure: XSuLygmr83zEpWcXIXMXGocN0QbooLud1eIMA3mQWKkT9LAU4TyrijLBcJIo7bD7
  
#---------------------------------#
#       install steps             #
#---------------------------------#
install:
  - ps: choco install imagemagick.tool
  
#---------------------------------#
#       build configuration       #
#---------------------------------#

build_script:
  - cmd: bundle install
  - cmd: if not exist _deploy (git clone https://%GithubUsername%:%GithubPassword%@github.com/%GithubUsername%/%GithubUsername%.github.io.git _deploy)
  - cmd: cd _deploy
  - cmd: git checkout master
  - cmd: cd ..
  - cmd: rake generate
  - cmd: rake deploy
  
test: off
